(this["webpackJsonpcs4550-su1-acabey-project-frontend-react"]=this["webpackJsonpcs4550-su1-acabey-project-frontend-react"]||[]).push([[0],{100:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(16),o=a.n(c),s=(a(67),a(13)),l=a(10),i=a(4),u=a(6),m=a(5),d="http://acabey-server-java.herokuapp.com/api",h=function(e,t){return fetch("".concat(d,"/login"),{body:JSON.stringify({username:e,password:t}),headers:{"content-type":"application/json"},method:"POST",credentials:"include"}).then((function(e){return e.json()}))},p=function(){return fetch("".concat(d,"/logout"),{method:"POST",credentials:"include"}).then((function(e){return e.json()}))},f=function(e,t){return fetch("".concat(d,"/register"),{body:JSON.stringify({username:e,password:t}),headers:{"content-type":"application/json"},method:"POST",credentials:"include"}).then((function(e){return e.json()}))},b=function(){return fetch("".concat(d,"/profile"),{method:"GET",credentials:"include"}).then((function(e){return e.json()}))},E=function(e,t){return fetch("".concat(d,"/profile/").concat(e),{body:JSON.stringify(t),headers:{"content-type":"application/json"},method:"PUT",credentials:"include"}).then((function(e){return e.json()}))},g=function(e){return fetch("".concat(d,"/profile/").concat(e),{method:"DELETE",credentials:"include"}).then((function(e){return e.json()}))},v=function(e){return fetch("".concat(d,"/users/").concat(e),{method:"GET",credentials:"include"}).then((function(e){return e.json()}))},w=a(11),y=a(9),N=function(e){var t=e.alertType,a=e.message,r=e.clear;return n.a.createElement("div",{className:"alert alert-".concat(t)},a,r&&n.a.createElement("button",{className:"float-right btn",onClick:r},n.a.createElement(w.a,{icon:y.k})))},T=a(12),S=new function e(){var t=this;Object(i.a)(this,e),this.url="http://acabey-server-java.herokuapp.com/api",this.createMedium=function(e,a){return fetch("".concat(t.url,"/users/").concat(e,"/media"),{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},this.findMediaForUser=function(e){return fetch("".concat(t.url,"/users/").concat(e,"/media")).then((function(e){return e.json()}))},this.findMediaForWatchlist=function(e){return fetch("".concat(t.url,"/watchlists/").concat(e,"/media"),{method:"GET",credentials:"include"}).then((function(e){return e.json()}))},this.findMediumById=function(e){return fetch("".concat(t.url,"/media/").concat(e),{method:"GET"}).then((function(e){return e.json()}))},this.findAllMedia=function(e){return fetch("".concat(t.url,"/media"),{method:"GET"}).then((function(e){return e.json()}))},this.updateMedium=function(e,a){return fetch("".concat(t.url,"/media/").concat(e),{method:"PUT",body:JSON.stringify(a),headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},this.deleteMedium=function(e){return fetch("".concat(t.url,"/media/").concat(e),{method:"DELETE"}).then((function(e){return e.json()}))},this.searchMediaByTitle=function(e){return fetch("".concat(t.url,"/search/").concat(e),{method:"GET"}).then((function(e){return e.json()}))};var r=a(75);this.tvdb=new r("e5094420c444a38c3b46f926de91dde3")},I=a(44),M=a(7),j={media:[],error:""},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MEDIUM":return Object(M.a)(Object(M.a)({},e),{},{media:[].concat(Object(I.a)(e.media),[t.newMedium])});case"DELETE_MEDIUM":return Object(M.a)(Object(M.a)({},e),{},{media:e.media.filter((function(e){return e.id!==t.mediumId}))});case"UPDATE_MEDIUM":return Object(M.a)(Object(M.a)({},e),{},{media:e.media.map((function(e){return e.id===t.updatedMedium.id?t.updatedMedium:e}))});case"FIND_MEDIA":return Object(M.a)(Object(M.a)({},e),{},{media:t.media,error:""});case"FIND_MEDIA_ERROR":return Object(M.a)(Object(M.a)({},e),{},{error:t.error});default:return e}},W=a(39),A=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={searchTerm:"",errorMessage:""},e.componentDidMount=function(){e.props.getProfile(),e.props.match.params.title&&e.setState({searchTerm:decodeURI(e.props.match.params.title)})},e.handleKeys=function(t){"Enter"===t.key&&e.search()},e.search=function(){e.state.searchTerm&&(e.props.history.push("/search/".concat(encodeURI(e.state.searchTerm))),e.props.searchMedia(e.state.searchTerm))},e.render=function(){return n.a.createElement("nav",{className:"navbar navbar-expand navbar-light justify-content-between fixed-top wbdv-navbar bg-mute-secondary"},n.a.createElement("div",{className:"collapse navbar-collapse"},n.a.createElement("ul",{className:"navbar-nav"},n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement(s.b,{className:"btn navbar-brand nav-link",to:"/"},n.a.createElement("span",{className:"wbdv-field wbdv-hamburger mr-2"},n.a.createElement(w.a,{className:"color-primary",icon:y.l,size:"1x"})),n.a.createElement("strong",{className:"wbdv-label wbdv-course-manager d-none d-md-inline text-mute-primary"},"What to Watch")))),n.a.createElement("input",{className:"form-control mr-4 bg-transparent-0 rounded-0 wbdv-field wbdv-new-course text-black-50",type:"text",placeholder:"Search","aria-label":"Search media",onKeyPress:e.handleKeys,onChange:function(t){return e.setState({searchTerm:t.target.value})}}),n.a.createElement("div",{className:"navbar-light navbar-nav"},n.a.createElement("button",{className:"btn nav-link wbdv-button wbdv-search",onClick:e.search},n.a.createElement(w.a,{className:"color-primary",icon:y.h,size:"2x"}))),n.a.createElement("div",{className:"nav-item navbar-light navbar-nav dropdown"},n.a.createElement("button",{className:"btn nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.a.createElement(w.a,{className:"color-primary",icon:y.m,size:"2x"})),e.props.user?n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},n.a.createElement(s.b,{className:"dropdown-item",to:"/profile"},"Profile"),n.a.createElement(s.b,{className:"dropdown-item",to:"/logout"},"Logout")):n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},n.a.createElement(s.b,{className:"dropdown-item",to:"/login"},"Login"),n.a.createElement(s.b,{className:"dropdown-item",to:"/register"},"Register")))))},e}return Object(W.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.title!==e.match.params.title&&(this.setState({searchTerm:decodeURI(this.props.match.params.title)}),this.props.getProfile())}}]),a}(n.a.Component),D=Object(T.b)((function(e,t){return{media:e.mediumReducer.media,user:e.userReducer.user,match:t.match}}),(function(e){return{searchMedia:function(t){S.searchMediaByTitle(t).then((function(t){t.error?e({type:"FIND_MEDIA_ERROR",error:t}):e({type:"FIND_MEDIA",media:t})}))},getProfile:function(){b().then((function(t){!t||t.error||e({type:"SIGN_IN",user:t})}))},logout:function(){p().then((function(t){!t||t.error||e({type:"SIGN_IN",user:t})}))}}}))(A),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={username:"",password:"",email:"",role:"",bio:"",imageUrl:"",successMessage:""},e.componentDidMount=function(){b().catch((function(t){e.props.history.push("/login")})).then((function(t){t?t.error?e.setState({errorMessage:t.message}):e.setState({username:t.username,password:t.password,email:t.email,role:t.role,bio:t.bio,imageUrl:t.imageUrl}):console.error("Invalid response from server on login")}))},e.validate=function(){var t,a=!0;return""===e.state.username?(t="Username cannot be blank",a=!1):""===e.state.password?(t="Password cannot be blank",a=!1):["USER","ADMIN","MODERATOR"].includes(e.state.role)||(t="Invalid user role: ".concat(e.state.role),a=!1),e.setState({errorMessage:t}),a},e.update=function(){e.validate()&&E(e.state.username,{username:e.state.username,password:e.state.password,email:e.state.email,role:e.state.role,bio:e.state.bio,imageUrl:e.state.imageUrl}).catch((function(t){e.props.history.push("/login")})).then((function(t){t?t.error?e.setState({errorMessage:t.message}):e.setState({username:t.username,password:t.password,email:t.email,role:t.role,bio:t.bio,imageUrl:t.imageUrl,successMessage:"Successfully updated profile!"}):console.error("Invalid response from server on update")}))},e.deleteUser=function(){g(e.state.username).then((function(t){e.logout()}))},e.logout=function(){p().then((function(t){return e.props.history.push("/")}))},e.render=function(){return n.a.createElement("div",{className:"container"},n.a.createElement(D,{history:e.props.history,match:e.props.match}),n.a.createElement("h1",null,"Profile"),e.state.successMessage&&n.a.createElement(N,{alertType:"success",message:e.state.successMessage,clear:function(){e.setState({successMessage:""})}}),e.state.errorMessage&&n.a.createElement(N,{alertType:"danger",message:e.state.errorMessage,clear:function(){e.setState({errorMessage:""})}}),n.a.createElement("div",{class:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},n.a.createElement("div",{class:"modal-dialog",role:"document"},n.a.createElement("div",{class:"modal-content"},n.a.createElement("div",{class:"modal-header"},n.a.createElement("h5",{class:"modal-title",id:"exampleModalLabel"},"Delete User"),n.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("div",{class:"modal-body"},"Are you sure you want to delete this account? This action cannot be undone"),n.a.createElement("div",{class:"modal-footer"},n.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"),n.a.createElement("button",{type:"button",class:"btn btn-danger",onClick:e.deleteUser},"Delete"))))),n.a.createElement("div",{className:"rounded border border-secondary bg-white"},n.a.createElement("div",{className:"m-4"},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-lg-2 col-sm-6 col-form-label",htmlFor:"username"},"Username"),n.a.createElement("div",{className:"col-lg-10 col-sm-6"},n.a.createElement("input",{id:"username",className:"form-control wbdv-field wbdv-username",value:e.state.username,type:"text",placeholder:"Username",title:"Use this username to login",disabled:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-lg-2 col-sm-6 col-form-label",htmlFor:"password"},"Password"),n.a.createElement("div",{className:"col-lg-10 col-sm-6"},n.a.createElement("input",{id:"password",className:"form-control wbdv-field wbdv-password",type:"password",placeholder:"Enter password",value:e.state.password,onChange:function(t){e.setState({password:t.target.value})},title:"Password for this account"}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-lg-2 col-sm-6 col-form-label",htmlFor:"email"},"Email"),n.a.createElement("div",{className:"col-lg-10 col-sm-6"},n.a.createElement("input",{id:"email",className:"form-control wbdv-field wbdv-email",type:"text",placeholder:"Email address",value:e.state.email,onChange:function(t){e.setState({email:t.target.value})},title:"Email for this account"}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-lg-2 col-sm-6 col-form-label",htmlFor:"role"},"Role"),n.a.createElement("div",{className:"col-lg-10 col-sm-6"},n.a.createElement("select",{className:"form-control custom-select wbdv-field wbdv-role",id:"role",value:e.state.role,onChange:function(t){e.setState({role:t.target.value})}},n.a.createElement("option",{value:"USER"},"User"),n.a.createElement("option",{value:"MODERATOR"},"Moderator"),n.a.createElement("option",{value:"ADMIN"},"Admin")))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-lg-2 col-sm-6 col-form-label",htmlFor:"imageUrl"},"Profile Image"),n.a.createElement("div",{className:"col-lg-10 col-sm-6"},n.a.createElement("input",{id:"bio",type:"text",className:"form-control wbdv-field wbdv-image-url",placeholder:"Image URL",value:e.state.imageUrl,onChange:function(t){e.setState({imageUrl:t.target.value})},title:"Profile image URL"}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-lg-2 col-sm-6 col-form-label",htmlFor:"bio"},"Bio"),n.a.createElement("div",{className:"col-lg-10 col-sm-6"},n.a.createElement("textarea",{id:"bio",className:"form-control wbdv-field wbdv-bio",placeholder:"Biography",value:e.state.bio,onChange:function(t){e.setState({bio:t.target.value})},title:"Profile biography"}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-2 col-form-label"}),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("button",{className:"btn btn-success btn-block wbdv-button wbdv-update",onClick:e.update},"Update"))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-2 col-form-label"}),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("button",{className:"btn btn-warning btn-block wbdv-button wbdv-logout",onClick:e.logout},"Logout"))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-2 col-form-label"}),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("button",{type:"button",className:"btn btn-danger btn-block wbdv-button wbdv-delete","data-toggle":"modal","data-target":"#exampleModal"},"Delete this account"))))))},e}return a}(n.a.Component),R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={username:"",password:"",verifyPassword:"",errorMessage:""},e.validate=function(){var t,a=!0;return""===e.state.username?(t="Username cannot be blank",a=!1):""===e.state.password?(t="Password cannot be blank",a=!1):e.state.password!==e.state.verifyPassword&&(t="Passwords are not equal",a=!1),e.setState({errorMessage:t}),a},e.register=function(){e.validate()&&f(e.state.username,e.state.password).then((function(t){t?t.error?e.setState({errorMessage:t.message}):e.props.history.push("/profile"):console.error("Invalid response from server on register")})).catch((function(e){console.log("Error registering ".concat(e.toString()))}))},e.handleKeys=function(t){"Enter"===t.key&&e.register()},e.render=function(){return n.a.createElement("div",{className:"container"},e.state.errorMessage&&n.a.createElement(N,{message:n.a.createElement(n.a.Fragment,null,n.a.createElement("strong",null,"Error! ")," ",e.state.errorMessage),alertType:"danger",clear:function(){return e.setState({errorMessage:""})}}),n.a.createElement("h1",null,"Register"),n.a.createElement("div",{className:"rounded border border-secondary bg-white"},n.a.createElement("div",{className:"m-4"},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{for:"username",className:"col-sm-2 col-form-label"},"Username"),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("input",{id:"username",className:"form-control wbdv-field wbdv-username",type:"text",placeholder:"Username",title:"Use this username to login",onChange:function(t){e.setState({username:t.target.value})},onKeyPress:e.handleKeys}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{for:"password",className:"col-sm-2 col-form-label"},"Password"),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("input",{id:"password",className:"form-control wbdv-field wbdv-password",type:"password",onChange:function(t){e.setState({password:t.target.value})},onKeyPress:e.handleKeys}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{for:"verify-password",className:"col-sm-2 col-form-label"},"Verify Password"),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("input",{id:"verify-password",className:"form-control wbdv-field wbdv-password-verify",type:"password",onChange:function(t){e.setState({verifyPassword:t.target.value})},onKeyPress:e.handleKeys}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-2 col-form-label"}),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("div",{className:"form-group row"},n.a.createElement("button",{className:"btn btn-primary btn-primary btn-block wbdv-button wbdv-register",onClick:e.register},"Register")),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6"},n.a.createElement(s.b,{className:"wbdv-link wbdv-login",to:"/login"},"Have an account already? Login")),n.a.createElement("div",{className:"col-6"},n.a.createElement(s.b,{className:"float-right wbdv-link wbdv-cancel",to:"/"},"Cancel"))))))))},e}return a}(n.a.Component),_=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={username:"",password:""},e.validate=function(){var t,a=!0;return""===e.state.username?(t="Username cannot be blank",a=!1):""===e.state.password&&(t="Password cannot be blank",a=!1),e.setState({errorMessage:t}),a},e.login=function(){e.validate()&&(e.props.login(e.state.username,e.state.password),e.props.history.push("/"))},e.handleKeys=function(t){"Enter"===t.key&&e.login()},e.render=function(){return n.a.createElement("div",{className:"container"},e.props.error&&n.a.createElement(N,{message:n.a.createElement(n.a.Fragment,null,n.a.createElement("strong",null,"Error! ")," ",e.props.error),alertType:"danger",clear:function(){return e.props.setError("")}}),n.a.createElement("h1",null,"Sign In"),n.a.createElement("div",{className:"rounded border border-secondary bg-white"},n.a.createElement("div",{className:"m-4"},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"username",className:"col-sm-2 col-form-label"},"Username "),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("input",{className:"form-control wbdv-field wbdv-username",id:"username",placeholder:"Username",onChange:function(t){e.setState({username:t.target.value})},onKeyPress:e.handleKeys}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"password",className:"col-sm-2 col-form-label"},"Password "),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("input",{type:"password",className:"form-control wbdv-field wbdv-password",id:"password",placeholder:"Password",onChange:function(t){e.setState({password:t.target.value})},onKeyPress:e.handleKeys}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-2 col-form-label"}),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("button",{className:"btn btn-primary btn-block wbdv-login",onClick:e.login},"Sign in"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6"}),n.a.createElement("div",{className:"col-6"},n.a.createElement(s.b,{className:"float-right wbdv-link wbdv-register",to:"/register"},"Sign up"))))))))},e}return a}(n.a.Component),U=Object(T.b)((function(e,t){return{user:e.userReducer.user,errorMessage:e.userReducer.errorMessage,match:t.match}}),(function(e){return{login:function(t,a){h(t,a).then((function(t){t?t.error?e({type:"SET_ERROR",error:t.message}):e({type:"SIGN_IN",user:t}):(console.error("Invalid response body for login"),e({type:"SET_ERROR",error:"Null reply on login"}))})).catch((function(t){console.error("Error on login: ".concat(t)),e({type:"SET_ERROR",error:t})}))},logout:function(){e({type:"SIGN_OUT"})},setError:function(t){e({type:"SET_ERROR",error:t})}}}))(_),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).componentDidMount=function(){e.props.logout(),e.props.history.push("/")},e.render=function(){return n.a.createElement(n.a.Fragment,null)},e}return a}(n.a.Component),k=Object(T.b)((function(e,t){return{user:e.userReducer.user,errorMessage:e.userReducer.errorMessage,match:t.match,history:t.history}}),(function(e){return{login:function(t,a){h(t,a).then((function(t){t?t.error?e({type:"SET_ERROR",error:t.message}):e({type:"SIGN_IN",user:t}):(console.error("Invalid response body for login"),e({type:"SET_ERROR",error:"Null reply on login"}))})).catch((function(t){console.error("Error on login: ".concat(t)),e({type:"SET_ERROR",error:t})}))},logout:function(){p().then((function(){e({type:"SIGN_OUT"})})).catch((function(){}))},setError:function(t){e({type:"SET_ERROR",error:t})}}}))(F),L="http://acabey-server-java.herokuapp.com/api",P={createWatchlist:function(e,t){return fetch("".concat(L,"/users/").concat(e,"/watchlists"),{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},findWatchlistsForUser:function(e){return fetch("".concat(L,"/users/").concat(e,"/watchlists")).then((function(e){return e.json()}))},findWatchlistById:function(e){return fetch("".concat(L,"/watchlists/").concat(e),{method:"GET"}).then((function(e){return e.json()}))},findAllWatchlists:function(e){return fetch("".concat(L,"/watchlists"),{method:"GET"}).then((function(e){return e.json()}))},updateWatchlist:function(e,t){return fetch("".concat(L,"/watchlists/").concat(e),{method:"PUT",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},deleteWatchlist:function(e){return fetch("".concat(L,"/watchlists/").concat(e),{method:"DELETE"}).then((function(e){return e.json()}))}},x=a(125),H=(a(100),{watchlists:[],selectedWatchlists:[]}),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_WATCHLIST":return{watchlists:[].concat(Object(I.a)(e.watchlists),[t.newWatchlist])};case"DELETE_WATCHLIST":return{watchlists:e.watchlists.filter((function(e){return e.id!==t.watchlistId}))};case"UPDATE_WATCHLIST":return Object(M.a)(Object(M.a)({},e),{},{watchlists:e.watchlists.map((function(e){return e.id===t.updatedWatchlist.id?t.updatedWatchlist:e}))});case"FIND_WATCHLISTS":return Object(M.a)(Object(M.a)({},e),{},{watchlists:t.watchlists});case"SELECT_WATCHLISTS":return Object(M.a)(Object(M.a)({},e),{},{selectedWatchlists:t.selectedWatchlists});default:return e}},K=a(126),B=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){v(r.props.watchlist.ownerId).then((function(e){e&&!e.error?r.setState({owner:e}):console.error("Failed to get user: ".concat(e.error))})).catch((function(e){console.error("Failed to get user: ".concat(e.toString()))}))},r.toggleHover=function(){r.setState({hover:!r.state.hover})},r.getImage=function(){return"https://thetvdb.com/banners/posters/83268-1_t.jpg"},r.render=function(){return n.a.createElement("div",{className:"bg-mute-tertiary",onMouseEnter:r.toggleHover,onMouseLeave:r.toggleHover},n.a.createElement("div",{className:"card-img-top vh-20",style:{"background-image":'url("'.concat(r.getImage(),'")'),"background-repeat":"no-repeat","background-position":"contain contain","background-size":"100% 100%"}}),n.a.createElement("div",{className:"card-body border-top"},n.a.createElement("div",null,n.a.createElement(K.a,{title:"".concat(r.state.owner?r.state.owner.username:r.props.watchlist.id)},n.a.createElement(s.b,{to:"/watchlists/".concat(r.props.watchlist.id)},n.a.createElement("strong",{className:"text-white"},r.props.watchlist.title))))))},r.state={hover:!1,owner:null},r}return a}(n.a.Component),J=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).render=function(){return n.a.createElement("div",{className:""},n.a.createElement("div",{className:"ml-2 mr-2"},n.a.createElement("div",{className:"row"},e.props.watchlists.map((function(e){return n.a.createElement("div",{className:"col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 mb-2"},n.a.createElement(B,{watchlist:e,key:e.id}))})))))},e}return Object(W.a)(a,[{key:"componentDidMount",value:function(){this.props.user&&!this.props.user.error?this.props.findWatchlistsForUser(this.props.user.id):this.props.findAllWatchlists()}}]),a}(n.a.Component),z=Object(T.b)((function(e,t){return{watchlists:e.watchlistReducer.watchlists,editingWatchlist:e.watchlistReducer.editingWatchlist,params:t.params}}),(function(e){return{findAllWatchlists:function(){P.findAllWatchlists().then((function(t){return e({type:"FIND_WATCHLISTS",watchlists:t})}))}}}))(J),Z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={sortDescription:"AZ_ASC"},e.toggleSort=function(){e.setState((function(e){return{sortDescription:"AZ_ASC"===e.sortDescription?"AZ_DESC":"AZ_ASC"}}))},e.sortMedia=function(e){return e},e.sortAZdesc=function(e){return e.sort((function(e,t){return e.title&&t.title?e.title.localeCompare(t.title):0}))},e.sortAZasc=function(e){return e.sort((function(e,t){return e.title&&t.title?t.title.localeCompare(e.title):0}))},e}return a}(n.a.Component),Y=a(127),q=a(34),V=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).toggleHover=function(){r.setState({hover:!r.state.hover})},r.toggleSelected=function(){r.setState({selected:!r.state.selected})},r.getImage=function(){return"https://thetvdb.com/banners/posters/83268-1_t.jpg"},r.render=function(){return n.a.createElement("div",{className:"bg-mute-tertiary",onMouseEnter:r.toggleHover,onMouseLeave:r.toggleHover},n.a.createElement("div",{className:"card-img-top vh-20",style:{"background-image":'url("'.concat(r.getImage(),'")'),"background-repeat":"no-repeat","background-position":"contain contain","background-size":"100% 100%"}},(r.state.hover||r.state.selected)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,{title:"Select",className:"float-left"},n.a.createElement(Y.a,{"aria-label":"Add to watchlist",onClick:r.toggleSelected},n.a.createElement(w.a,{className:"color-white",icon:r.state.selected?q.a:q.b,inverse:!1,size:"1x"}))),n.a.createElement(K.a,{title:"Add to watchlist",className:"float-right"},n.a.createElement(Y.a,{"aria-label":"Add to watchlist"},n.a.createElement(w.a,{className:"color-white",icon:y.g,inverse:!1,size:"1x"}))))),n.a.createElement("div",{className:"card-body border-top"},n.a.createElement("div",null,n.a.createElement(K.a,{title:"".concat(r.props.medium.title," (").concat(new Date(r.props.medium.firstAired).getFullYear(),")")},n.a.createElement(s.b,{to:"/details/".concat(r.props.medium.tvdbId)},n.a.createElement("strong",{className:"text-white"},r.props.medium.title," (",new Date(r.props.medium.firstAired).getFullYear(),")"))))))},r.state={hover:!1,selected:!1},r}return a}(Z),$=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).render=function(){return n.a.createElement("div",{className:""},n.a.createElement("div",{className:"ml-2 mr-2"},n.a.createElement("div",{className:"row"},e.sortMedia(e.props.media).map((function(e){return n.a.createElement("div",{className:"col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 mb-2"},n.a.createElement(V,{medium:e,key:e.id}))})))))},e}return a}(Z),Q=a(124),X=a(128),ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).componentDidMount=function(){e.props.getProfile(),e.props.user&&e.props.findWatchlistsForUser(e.props.user.id)},e.render=function(){return n.a.createElement(Q.a,null,e.props.user?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"nav-item navbar-light navbar-nav dropdown"},n.a.createElement(K.a,{title:"Select watchlists",className:"float-left"},n.a.createElement(Y.a,{className:"btn nav-link dropdown-toggle caret-off ml-2 mb-2",id:"watchlistDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false","aria-label":"Select watchlists"},n.a.createElement(w.a,{icon:y.b})))),n.a.createElement("div",{className:"dropdown-menu bg-mute-dropdown","aria-labelledby":"watchlistDropdown"},n.a.createElement("button",{className:"btn dropdown-item bg-mute-dropdown-select text-white border-top",to:"/watchlists"},"Create new watchlist")),n.a.createElement(K.a,{title:"Add to watchlist",className:"float-left"},n.a.createElement(Y.a,{className:"btn nav-link caret-off ml-2 float-right","aria-label":"Add to watchlist",onClick:e.props},n.a.createElement(w.a,{icon:y.f})))):n.a.createElement(X.a,{to:"/login",className:"ml-2 text-color-primary"},"Sign in to add to watchlists"))},e}return a}(n.a.Component),te=Object(T.b)((function(e,t){return{watchlists:e.watchlistReducer.watchlists,selectedWatchlists:e.watchlistReducer.selectedWatchlists,user:e.userReducer.user,match:t.match}}),(function(e){return{watchMedia:function(t,a){for(var r=function(r){var n=a[r];P.watchMedium(t,n).then((function(a){!a||a.error||e({type:"WATCH_MEDIUM",watchlistId:t,medium:n})}))},n=0;n<a.length;n++)r(n)},getProfile:function(){b().then((function(t){!t||t.error||e({type:"SIGN_IN",user:t})}))},findWatchlistsForUser:function(t){P.findWatchlistsForUser(t).then((function(t){return e({type:"FIND_WATCHLISTS",watchlists:t})})).catch((function(t){return e({type:"FIND_WATCHLISTS",watchlists:[]})}))},findAllWatchlists:function(){P.findAllWatchlists().then((function(t){return e({type:"FIND_WATCHLISTS",watchlists:t})}))},updateWatchlist:function(t,a){a.id=t,P.updateWatchlist(t,a).then((function(r){r&&e({type:"UPDATE_WATCHLIST",watchlistId:t,updatedWatchlist:a})}))},createWatchlist:function(t,a){P.createWatchlist(t,a).then((function(t){return e({type:"CREATE_WATCHLIST",newWatchlist:t})}))},deleteWatchlist:function(t){P.deleteWatchlist(t).then((function(a){return e({type:"DELETE_WATCHLIST",watchlistId:t})}))},selectWatchlists:function(t){e({type:"SELECT_WATCHLISTS",media:t})}}}))(ee),ae=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).render=function(){return r.props.error?n.a.createElement(N,{alertType:"danger",message:r.props.error.message}):n.a.createElement(n.a.Fragment,null,n.a.createElement(te,null),n.a.createElement($,{media:r.props.media}))},r}return a}(n.a.Component),re=Object(T.b)((function(e,t){return{media:e.mediumReducer.media,selectedMedia:e.mediumReducer.selectedMedia,error:e.mediumReducer.error,match:t.match}}),(function(e){return{findMediaForUser:function(t){S.findMediaForUser(t).then((function(t){return e({type:"FIND_MEDIA",media:t})})).catch((function(e){console.error("Could not find media for user")}))},findAllMedia:function(){S.findAllMedia().then((function(t){return e({type:"FIND_MEDIA",media:t})}))},updateMedium:function(t,a){a.id=t,S.updateMedium(t,a).then((function(t){t&&e({type:"UPDATE_MEDIUM",updatedMedium:a})}))},createMedium:function(t,a){S.createMedium(t,a).then((function(t){return e({type:"CREATE_MEDIUM",newMedium:t})}))},deleteMedium:function(t){S.deleteMedium(t).then((function(a){return e({type:"DELETE_MEDIUM",mediumId:t})}))},searchMedia:function(t){S.searchMediaByTitle(t).then((function(t){t.error?e({type:"FIND_MEDIA_ERROR",error:t}):e({type:"FIND_MEDIA",media:t})}))}}}))(ae),ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).componentDidMount=function(){e.props.getProfile(),e.props.user&&e.props.findWatchlistsForUser(e.props.user.id)},e.createWatchlist=function(){e.props.createWatchlist(e.props.user.id,{title:"New Watchlist"})},e.render=function(){return n.a.createElement(x.a,{fluid:!0},n.a.createElement(D,{history:e.props.history,match:e.props.match}),e.props.match.params.title?n.a.createElement(re,{history:e.props.history,match:e.props.match}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h5",{className:"text-secondary"},"Top Public Watchlists"),n.a.createElement(z,null),e.props.user&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h5",{className:"text-secondary"},"My Watchlists"),n.a.createElement(z,null),n.a.createElement(K.a,{title:"Create new watchlist",className:"float-left"},n.a.createElement(Y.a,{"aria-label":"Create new watchlist",onClick:function(){return e.createWatchlist()}},n.a.createElement(w.a,{className:"color-mute-tertiary",icon:y.g,inverse:!1,size:"2x"}))))))},e}return a}(n.a.Component),ce=Object(T.b)((function(e,t){return{watchlists:e.watchlistReducer.watchlists,selectedWatchlists:e.watchlistReducer.selectedWatchlists,user:e.userReducer.user,match:t.match}}),(function(e){return{getProfile:function(){b().then((function(t){!t||t.error||e({type:"SIGN_IN",user:t})}))},findWatchlistsForUser:function(t){P.findWatchlistsForUser(t).then((function(t){return e({type:"FIND_WATCHLISTS",watchlists:t})})).catch((function(t){return e({type:"FIND_WATCHLISTS",watchlists:[]})}))},findAllWatchlists:function(){P.findAllWatchlists().then((function(t){return e({type:"FIND_WATCHLISTS",watchlists:t})}))},updateWatchlist:function(t,a){a.id=t,P.updateWatchlist(t,a).then((function(r){r&&e({type:"UPDATE_WATCHLIST",watchlistId:t,updatedWatchlist:a})}))},createWatchlist:function(t,a){P.createWatchlist(t,a).then((function(t){return e({type:"CREATE_WATCHLIST",newWatchlist:t})}))},deleteWatchlist:function(t){P.deleteWatchlist(t).then((function(a){return e({type:"DELETE_WATCHLIST",watchlistId:t})}))},selectWatchlists:function(t){e({type:"SELECT_WATCHLISTS",media:t})}}}))(ne),oe=Object(T.b)((function(e,t){return{media:e.mediumReducer.media,selectedMedia:e.mediumReducer.selectedMedia,error:e.mediumReducer.error,match:t.match}}),(function(e){return{findMediaForUser:function(t){S.findMediaForUser(t).then((function(t){return e({type:"FIND_MEDIA",media:t})})).catch((function(e){console.error("Could not find media for user")}))},findAllMedia:function(){S.findAllMedia().then((function(t){return e({type:"FIND_MEDIA",media:t})}))},updateMedium:function(t,a){a.id=t,S.updateMedium(t,a).then((function(t){t&&e({type:"UPDATE_MEDIUM",updatedMedium:a})}))},createMedium:function(t,a){S.createMedium(t,a).then((function(t){return e({type:"CREATE_MEDIUM",newMedium:t})}))},deleteMedium:function(t){S.deleteMedium(t).then((function(a){return e({type:"DELETE_MEDIUM",mediumId:t})}))},searchMedia:function(t){S.searchMediaByTitle(t).then((function(t){t.error?e({type:"FIND_MEDIA_ERROR",error:t}):e({type:"FIND_MEDIA",media:t})}))}}}))(ae),se=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={owner:null,isEditing:!1,updatedTitle:""},r.toggleEditing=function(){r.state.isEditing?(r.setState({isEditing:!r.state.isEditing}),r.save()):r.setState({isEditing:!r.state.isEditing,updatedTitle:r.props.watchlist.title})},r.save=function(){r.props.updateWatchlist(r.props.match.params.watchlistId,Object(M.a)(Object(M.a)({},r.props.watchlist),{},{title:r.state.updatedTitle}))},r.componentDidMount=function(){r.props.watchlist||r.props.setWatchlist(r.props.match.params.watchlistId),r.props.findMediaForWatchlist(r.props.match.params.watchlistId),v(r.props.watchlist.ownerId).then((function(e){e&&!e.error?r.setState({owner:e}):console.error("Failed to get user: ".concat(e.error))})).catch((function(e){console.error("Failed to get user: ".concat(e.toString()))}))},r.render=function(){return n.a.createElement(x.a,{fluid:!1},n.a.createElement(D,{history:r.props.history,match:r.props.match}),n.a.createElement("span",null,r.state.isEditing?n.a.createElement("span",null,n.a.createElement("input",{className:"form-control",type:"text",value:r.state.updatedTitle,onChange:function(e){r.setState({updatedTitle:e.target.value})}})):n.a.createElement("span",null,n.a.createElement("h4",null,r.props.watchlist.title)),n.a.createElement("button",{className:"btn",onClick:r.toggleEditing},n.a.createElement(w.a,{icon:r.state.isEditing?y.a:y.e}))),n.a.createElement(s.b,{to:"/profile/".concat(r.state.owner?r.state.owner.username:"")},n.a.createElement("span",{className:"text-black font-italic"},r.state.owner?r.state.owner.username:"")),n.a.createElement($,{media:r.props.media}))},r}return a}(n.a.Component),le=Object(T.b)((function(e,t){return{watchlists:e.watchlistReducer.watchlists,watchlist:e.watchlistReducer.watchlists[0],selectedWatchlists:e.watchlistReducer.selectedWatchlists,media:e.mediumReducer.media,user:e.userReducer.user,match:t.match}}),(function(e){return{getProfile:function(){b().then((function(t){!t||t.error||e({type:"SIGN_IN",user:t})}))},findWatchlistsForUser:function(t){P.findWatchlistsForUser(t).then((function(t){return e({type:"FIND_WATCHLISTS",watchlists:t})})).catch((function(t){return e({type:"FIND_WATCHLISTS",watchlists:[]})}))},findAllWatchlists:function(){P.findAllWatchlists().then((function(t){return e({type:"FIND_WATCHLISTS",watchlists:t})}))},setWatchlist:function(t){P.findWatchlistById(t).then((function(t){return e({type:"FIND_WATCHLISTS",watchlists:[t]})}))},updateWatchlist:function(t,a){a.id=t,P.updateWatchlist(t,a).then((function(r){r&&!r.error?e({type:"UPDATE_WATCHLIST",watchlistId:t,updatedWatchlist:a}):console.error("Failed to update widget ".concat(r.error))})).catch((function(e){console.error("Failed to update widget ".concat(e.toString()))}))},createWatchlist:function(t,a){P.createWatchlist(t,a).then((function(t){return e({type:"CREATE_WATCHLIST",newWatchlist:t})}))},deleteWatchlist:function(t){P.deleteWatchlist(t).then((function(a){return e({type:"DELETE_WATCHLIST",watchlistId:t})}))},selectWatchlists:function(t){e({type:"SELECT_WATCHLISTS",media:t})},findMediaForWatchlist:function(t){S.findMediaForWatchlist(t).then((function(a){a&&!a.error?e({type:"FIND_MEDIA",media:a}):console.error("Failed to find media for watchlist ".concat(t))}))}}}))(se);var ie=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(s.a,null,n.a.createElement(l.a,{path:["/","/search"],exact:!0,component:ce}),n.a.createElement(l.a,{path:"/logout",exact:!0,component:k}),n.a.createElement(l.a,{path:"/search/:title",exact:!0,component:ce}),n.a.createElement(l.a,{path:"/login",exact:!0,component:U}),n.a.createElement(l.a,{path:"/register",exact:!0,component:R}),n.a.createElement(l.a,{path:"/profile",exact:!0,component:C}),n.a.createElement(l.a,{path:"/details/:mediaId",exact:!0,component:oe}),n.a.createElement(l.a,{path:"/watchlists/:watchlistId",exact:!0,component:le})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(101),a(102),a(103);var ue=a(35),me={user:null,error:""},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(M.a)(Object(M.a)({},e),{},{user:t.user});case"SIGN_OUT":return Object(M.a)(Object(M.a)({},e),{},{user:null});case"SET_ERROR":return Object(M.a)(Object(M.a)({},e),{},{error:t.error});default:return e}},he=Object(ue.b)({watchlistReducer:G,mediumReducer:O,userReducer:de}),pe=Object(ue.c)(he);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(T.a,{store:pe},n.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){e.exports=a(105)},67:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.c9ee463c.chunk.js.map